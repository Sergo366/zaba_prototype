{% extends "base.html" %}
{% load humanize %}
{% load staticfiles %}
{% load static %}
{% load i18n %}
{% load advert_money %}
{% load crispy_forms_tags %}
{% load thumbnail %}

{% block title %} {% trans "Rents   " %} {% endblock %}
{% block head %}
    <link rel="stylesheet" href="{% static 'css/catalog.css' %}">
{% endblock %}
{% block breadcrumbs %}
    <li class="breadcrumb-item"><a href="/">{% trans "Home" %}</a></li>
    <li class="breadcrumb-item active" aria-current="page">{% trans "Rents" %}</li>
{% endblock %} {% block content %} {% include 'snippets/filter.html' %}

    <div class="container list-ads-user">
        {% if adverts %} {% for advert in adverts %}

        <div class="media">
          {% thumbnail advert.image "128" as ad %}
          <a href="{{ advert.image.url }}">
            <img class="mr-3" src="{{ ad.url }}" alt="no image" />
          </a>
          {% endthumbnail %} {% if not advert.image %}
          <img
            class="mr-3"
            src="{% static 'none/no-img.jpg' %}"
            alt="no image"
            width="128"
          />
          {% endif %}

          <div class="media-body">
            <div class="advert">
              <div class="wrap_list_adverts">
                {% if advert.author == request.user %}
                <a href="{% url 'rents:delete' advert.id %}" class="btn btn-sm">
                  <i class="fas fa-trash-alt"></i>
                </a>
                <a href="{% url 'rents:edit' advert.id %}" class="btn btn-sm">
                  <i class="fas fa-edit"></i>
                </a>
                {% endif %}
                </div>
                <div class="col-12 col-md-6">
                    <a href="{% url 'rents:detail' advert.id %}">
                        <h3>
                            {{ advert.title }}
                        </h3>
                    </a>
                    {% if advert.expires_type %}
                        <div class="text-info text-uppercase">
                            <b>{{ advert.expires_type.text }}</b>
                        </div>
                    {% endif %}

                    <small class="text-muted">
                        <i class="fas fa-map-marker-alt"> </i> {{ advert.city }}
                        <i>{{ advert.modified|naturaltime }} </i>
                    </small>
                </div>
                <div class="col-12 col-md-3 events d-flex flex-wrap justify-content-between justify-content-md-normal">
                    <div class="d-flex justify-content-end">
                        <b>{{ advert.price|prepend_dollars }}</b>
                    </div>
                    {% if advert.author == request.user %}
                        <a href="{% url 'rents:delete' advert.id %}" class="d-flex justify-content-between edit">
                            <span>Delete</span>
                            <i class="fas fa-trash"></i>
                        </a>
                        <a href="{% url 'rents:edit' advert.id %}"
                           class="d-flex justify-content-between delete mt-3">
                            <span>Edit</span>
                            <i class="fas fa-edit"></i>
                        </a>
                    {% endif %}
                    <div class="d-flex justify-content-end align-self-md-end">
                        <i class="fas fa-heart"></i>
                    </div>
                </div>
            </div>
        {% endfor %} {% else %}
            <p>No adverts are available.</p>
        {% endif %}
        {% include "snippets/pagination.html" %}
    </div>
  </div>
</div>
{% endblock %}

{% block script %} 
    {% include "snippets/js/city-latin-only-js.html" %}
{% endblock %} 

{% block add_ad_link %}
    {% url 'rents:new' %}
{% endblock %}
